import{_ as $,r as l,o as r,g as c,a as t,b as s,w as i,F as w,m as b,t as u,c as k,i as m,d as D}from"./main.f1eb50b0.js";const N={async created(){this.$route.params.account_pk!==this.store.transactions_filter.account_pk?this.clear():await this.load(0)},methods:{clear(){this.store.transactions_filter={account_pk:this.$route.params.account_pk,page:1,memo:null,description:null,num:null,date_start:null,date_end:null},this.load(0)},async load(e){e>0&&(this.store.transactions_filter.page=e),await this.store.get(`/phmoney/transactions/${this.$route.params.account_pk}`,this.store.transactions_filter)},async destroy(e){confirm("Are you sure you want to delete this item?")&&(await this.store.delete(`/phmoney/transactions/${this.store.props.account.pk}/destroy/${e.pk}`),this.load(this.store.transactions_filter.page))},async duplicate(e){await this.store.get(`/phmoney/transactions/${this.store.props.account.pk}/duplicate/${e.pk}`),await this.load(0)}}},B={key:0,class:"p-6 overflow-x-auto"},L={class:"flex gap-2"},U={class:"flex gap-2 pt-2"},F=t("span",{class:"material-icons-outlined"}," search ",-1),P=t("span",{class:"material-icons-outlined"}," search_off ",-1),E={key:0,class:"table-fixed"},R=t("th",null,"Date",-1),S=t("th",null,"Num",-1),T=t("th",null,"Description",-1),A=t("th",null,"R",-1),I=t("th",null,"Debit",-1),M=t("th",null,"Credit",-1),j=t("th",null,"Balance",-1),q=t("span",{class:"material-icons-outlined"},"add",-1),z=["split"],G=["title"],H=["title"],J={class:"flex"},K=t("span",{class:"material-icons-outlined"},"source",-1),O=["onClick"],Q=t("span",{class:"material-icons-outlined"},"copy",-1),W=[Q],X=t("span",{class:"material-icons-outlined"},"edit",-1),Y=["onClick"],Z=t("span",{class:"material-icons-outlined"},"delete",-1),x=[Z];function tt(e,n,v,_,nt,a){const h=l("form-label"),d=l("form-input"),f=l("form-button"),g=l("form-secondary-button"),p=l("amount-financial"),y=l("RouterLink"),C=l("Pagination");return e.store.props.splits!==void 0?(r(),c("div",B,[t("div",L,[t("div",null,[s(h,{for:"date_start",value:"Start Date"}),s(d,{type:"date",id:"date_start",name:"date_start",modelValue:e.store.transactions_filter.date_start,"onUpdate:modelValue":n[0]||(n[0]=o=>e.store.transactions_filter.date_start=o),onChange:n[1]||(n[1]=o=>a.load(1))},null,8,["modelValue"])]),t("div",null,[s(h,{for:"date_end",value:"End Date"}),s(d,{type:"date",id:"date_end",name:"date_end",modelValue:e.store.transactions_filter.date_end,"onUpdate:modelValue":n[2]||(n[2]=o=>e.store.transactions_filter.date_end=o),onChange:n[3]||(n[3]=o=>a.load(1))},null,8,["modelValue"])])]),t("div",U,[s(d,{id:"memo",name:"memo",type:"text",modelValue:e.store.transactions_filter.memo,"onUpdate:modelValue":n[4]||(n[4]=o=>e.store.transactions_filter.memo=o),placeholder:"Memo...",onChange:n[5]||(n[5]=o=>a.load(1))},null,8,["modelValue"]),s(d,{id:"description",name:"description",type:"text",modelValue:e.store.transactions_filter.description,"onUpdate:modelValue":n[6]||(n[6]=o=>e.store.transactions_filter.description=o),placeholder:"Description...",onChange:n[7]||(n[7]=o=>a.load(1))},null,8,["modelValue"]),s(d,{id:"num",name:"num",type:"text",modelValue:e.store.transactions_filter.num,"onUpdate:modelValue":n[8]||(n[8]=o=>e.store.transactions_filter.num=o),placeholder:"Num...",onChange:n[9]||(n[9]=o=>a.load(1))},null,8,["modelValue"]),s(f,{title:"Search",onClick:n[10]||(n[10]=o=>a.load(1))},{default:i(()=>[F]),_:1}),s(g,{title:"Clear",onClick:a.clear},{default:i(()=>[P]),_:1},8,["onClick"])]),e.store.processing?m("",!0):(r(),c("table",E,[t("thead",null,[t("tr",null,[R,S,T,A,I,M,j,t("th",null,[s(f,{onClick:n[11]||(n[11]=o=>e.$router.push({name:"transactions.create",params:{account_pk:e.store.props.account.pk}})),title:"Add New"},{default:i(()=>[q]),_:1})])])]),t("tbody",null,[(r(!0),c(w,null,b(e.store.props.splits.data,o=>(r(),c("tr",{key:o.id,split:o,class:"hover:bg-sky-50"},[t("td",null,u(o.post_date),1),t("td",{class:"truncate",title:o.num},u(o.num),9,G),t("td",{class:"truncate",title:o.description},u(o.description),9,H),t("td",null,u(o.reconcile_state),1),t("td",null,[s(p,{amount:o.debit,commodity:e.store.props.account.commodity},null,8,["amount","commodity"])]),t("td",null,[s(p,{amount:o.credit,commodity:e.store.props.account.commodity},null,8,["amount","commodity"])]),t("td",null,[s(p,{amount:o.balance,commodity:e.store.props.account.commodity},null,8,["amount","commodity"])]),t("td",null,[t("div",J,[s(y,{class:"text-green-500 hover:text-green-300",to:{name:"transactions.view",params:{account_pk:e.store.props.account.pk,transaction_pk:o.pk}},title:"Details"},{default:i(()=>[K]),_:2},1032,["to"]),t("div",{class:"text-yellow-500 hover:text-yellow-300 hover:cursor-pointer",onClick:V=>a.duplicate(o),title:"Duplicate"},W,8,O),s(y,{class:"text-sky-500 hover:text-sky-300",to:{name:"transactions.edit",params:{account_pk:e.store.props.account.pk,transaction_pk:o.pk}},title:"Edit"},{default:i(()=>[X]),_:2},1032,["to"]),t("div",{class:"text-red-500 hover:text-red-300 hover:cursor-pointer",onClick:V=>a.destroy(o),title:"Delete"},x,8,Y)])])],8,z))),128))]),t("tfoot",null,[e.store.props.splits.total>e.store.props.splits.per_page?(r(),k(C,{key:0,current:e.store.props.splits.current_page,total:e.store.props.splits.total,"per-page":e.store.props.splits.per_page,onPageChanged:a.load},null,8,["current","total","per-page","onPageChanged"])):m("",!0)])]))])):m("",!0)}var et=$(N,[["render",tt]]);const ot={class:"bg-white shadow mt-4 prose max-w-none"},at=D({name:"TransactionsIndex",setup(e){return(n,v)=>{const _=l("FormLayout");return r(),k(_,{title:`Transactions - ${n.store.props.account?n.store.props.account.name:"..."}`},{default:i(()=>[t("div",ot,[s(et)])]),_:1},8,["title"])}}});export{at as default};
