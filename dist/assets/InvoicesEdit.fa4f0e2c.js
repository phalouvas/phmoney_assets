import{_ as h,r as a,o as r,g as t,a as i,k as d,p as m,t as p,b as n,F as c,m as _,i as v,s as k,w,n as V,e as x}from"./main.6096ac91.js";const C={data(){return{form:{invoice_type:this.store.getInvoiceType(),active:this.store.props.invoice.active,id:this.store.props.invoice.id,date_opened:this.store.props.invoice.date_opened,billing_id:this.store.props.invoice.billing_id,terms:this.store.props.invoice.terms,owner_type:this.store.props.invoice.owner_type,owner_guid:this.store.props.invoice.owner_guid,type:this.store.props.invoice.type.int64_val,notes:this.store.props.invoice.notes,charge_amt_num:this.store.props.charge_amt_num,charge_amt_denom:this.store.props.charge_amt_denom,billto_type:this.store.props.invoice.billto_type,billto_guid:this.store.props.invoice.billto_guid}}},methods:{async submit(){this.form.billto_guid==null&&(this.form.type=null),this.$route.name==="business.invoices.create"?await this.store.post("/phmoney/business/invoices/store",this.form):await this.store.post(`/phmoney/business/invoices/update/${this.$route.params.invoice_pk}`,this.form),this.$router.back()},async getJobs(){let u={owner_guid:this.form.owner_guid};try{const e=await this.store.axios.get("/phmoney/business/invoices/jobs",{params:u});this.store.props.jobs=e.data.jobs}catch(e){this.store.errors=e}},async getBillJobs(){let u={billto_guid:this.form.billto_guid};try{const e=await this.store.axios.get("/phmoney/business/invoices/jobs",{params:u});this.store.props.billto_jobs=e.data.billto_jobs}catch(e){this.store.errors=e}},type_change(){this.form.owner_guid=null,this.form.owner_type=null,this.form.billto_guid=null,this.form.billto_type=null,this.store.props.jobs=[],this.store.props.billto_jobs=[]}}},U={class:"p-3 border"},B=["disabled"],j=i("option",null,"Invoice",-1),I=i("option",null,"Bill",-1),J=i("option",null,"Voucher",-1),D=[j,I,J],S={class:"font-semibold text-md"},N={class:"flex flex-wrap gap-2"},E={class:"flex flex-wrap gap-2"},M=i("div",{class:"font-semibold text-md"},"Billing Information",-1),T={class:"flex flex-wrap gap-2"},F={key:0},q=["value"],z={key:1},A=["value"],L={key:2},O=["value"],P={key:3},G=["value"],H=["value"],K={key:0,class:"font-semibold text-md"},Q={key:1,class:"flex flex-wrap gap-2"},R=i("option",{value:null},"- Select a customer -",-1),W=["value"],X=i("option",{value:null},"- Select a job -",-1),Y=["value"],Z=i("div",{class:"font-semibold text-md"},"Notes",-1),$={class:"flex flex-wrap gap-2"},oo={class:"flex gap-2 items-center justify-end mt-4"},eo=i("span",{class:"material-icons-outlined"}," save ",-1);function so(u,e,io,ro,s,f){const l=a("form-label"),g=a("form-input"),y=a("form-checkbox"),b=a("form-button");return r(),t("form",{onSubmit:e[22]||(e[22]=x((...o)=>f.submit&&f.submit(...o),["prevent"])),class:"p-6"},[i("div",U,[d(i("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>s.form.invoice_type=o),name:"invoice_type",id:"invoice_type",disabled:u.store.props.invoice.guid,onChange:e[1]||(e[1]=(...o)=>f.type_change&&f.type_change(...o)),class:"border-gray-300 focus:border-sky-300 focus:ring focus:ring-sky-200 focus:ring-opacity-50 rounded-md shadow-sm"},D,40,B),[[m,s.form.invoice_type]]),i("div",S,p(s.form.invoice_type)+" Information",1),i("div",N,[n(l,{for:"radio_invoice",value:s.form.invoice_type},null,8,["value"]),n(g,{type:"radio",id:"radio_invoice",name:"radio_type",value:"0",checked:s.form.type=="0",modelValue:s.form.type,"onUpdate:modelValue":e[2]||(e[2]=o=>s.form.type=o)},null,8,["checked","modelValue"]),n(l,{for:"radio_credit_note",value:"Credit Note"}),n(g,{type:"radio",id:"radio_credit_note",name:"radio_type",value:"1",checked:s.form.type=="1",modelValue:s.form.type,"onUpdate:modelValue":e[3]||(e[3]=o=>s.form.type=o)},null,8,["checked","modelValue"])]),i("div",E,[i("div",null,[n(l,{for:"active",value:"Active"}),n(y,{id:"active",checked:s.form.active,"onUpdate:checked":e[4]||(e[4]=o=>s.form.active=o)},null,8,["checked"])]),i("div",null,[n(l,{for:"id",value:`${s.form.invoice_type} ID`},null,8,["value"]),n(g,{id:"id",type:"text",modelValue:s.form.id,"onUpdate:modelValue":e[5]||(e[5]=o=>s.form.id=o)},null,8,["modelValue"])]),i("div",null,[n(l,{for:"date_opened",value:"Date Opened"}),n(g,{id:"date_opened",type:"date",modelValue:s.form.date_opened,"onUpdate:modelValue":e[6]||(e[6]=o=>s.form.date_opened=o),required:""},null,8,["modelValue"])])]),M,i("div",T,[s.form.invoice_type==="Invoice"?(r(),t("div",F,[n(l,{for:"customer",value:"Customer"}),d(i("select",{id:"customer","onUpdate:modelValue":e[7]||(e[7]=o=>s.form.owner_guid=o),onChange:e[8]||(e[8]=o=>{s.form.owner_type=2,f.getJobs()}),class:"border-gray-300 focus:border-sky-300 focus:ring focus:ring-sky-200 focus:ring-opacity-50 rounded-md shadow-sm"},[(r(!0),t(c,null,_(u.store.props.customers,o=>(r(),t("option",{key:o.guid,value:o.guid},p(o.name),9,q))),128))],544),[[m,s.form.owner_guid]])])):v("",!0),s.form.invoice_type==="Bill"?(r(),t("div",z,[n(l,{for:"vendor",value:"Vendor"}),d(i("select",{id:"customer","onUpdate:modelValue":e[9]||(e[9]=o=>s.form.owner_guid=o),onChange:e[10]||(e[10]=o=>{s.form.owner_type=4,f.getJobs()}),class:"border-gray-300 focus:border-sky-300 focus:ring focus:ring-sky-200 focus:ring-opacity-50 rounded-md shadow-sm"},[(r(!0),t(c,null,_(u.store.props.vendors,o=>(r(),t("option",{key:o.guid,value:o.guid},p(o.name),9,A))),128))],544),[[m,s.form.owner_guid]])])):v("",!0),s.form.invoice_type==="Voucher"?(r(),t("div",L,[n(l,{for:"employee",value:"Employee"}),d(i("select",{id:"customer","onUpdate:modelValue":e[11]||(e[11]=o=>s.form.owner_guid=o),onChange:e[12]||(e[12]=o=>s.form.owner_type=5),class:"border-gray-300 focus:border-sky-300 focus:ring focus:ring-sky-200 focus:ring-opacity-50 rounded-md shadow-sm"},[(r(!0),t(c,null,_(u.store.props.employees,o=>(r(),t("option",{key:o.guid,value:o.guid},p(o.username),9,O))),128))],544),[[m,s.form.owner_guid]])])):v("",!0),s.form.invoice_type==="Invoice"||s.form.invoice_type==="Bill"?(r(),t("div",P,[n(l,{for:"job",value:"Job"}),d(i("select",{id:"customer","onUpdate:modelValue":e[13]||(e[13]=o=>s.form.owner_guid=o),onChange:e[14]||(e[14]=o=>s.form.owner_type=3),class:"border-gray-300 focus:border-sky-300 focus:ring focus:ring-sky-200 focus:ring-opacity-50 rounded-md shadow-sm"},[(r(!0),t(c,null,_(u.store.props.jobs,o=>(r(),t("option",{key:o.guid,value:o.guid},p(o.name),9,G))),128))],544),[[m,s.form.owner_guid]])])):v("",!0),i("div",null,[n(l,{for:"billing_id",value:"Billing ID"}),n(g,{id:"billing_id",type:"text",modelValue:s.form.billing_id,"onUpdate:modelValue":e[15]||(e[15]=o=>s.form.billing_id=o)},null,8,["modelValue"])]),i("div",null,[n(l,{for:"terms",value:"Terms"}),d(i("select",{id:"customer","onUpdate:modelValue":e[16]||(e[16]=o=>s.form.terms=o),class:"border-gray-300 focus:border-sky-300 focus:ring focus:ring-sky-200 focus:ring-opacity-50 rounded-md shadow-sm"},[(r(!0),t(c,null,_(u.store.props.billterms,o=>(r(),t("option",{key:o.guid,value:o.guid},p(o.name),9,H))),128))],512),[[m,s.form.terms]])])]),s.form.invoice_type==="Bill"||s.form.invoice_type==="Voucher"?(r(),t("div",K," Default Chargeback Project ")):v("",!0),s.form.invoice_type==="Bill"||s.form.invoice_type==="Voucher"?(r(),t("div",Q,[i("div",null,[n(l,{for:"billto_customer",value:"Customer"}),d(i("select",{id:"billto_customer","onUpdate:modelValue":e[17]||(e[17]=o=>s.form.billto_guid=o),onChange:e[18]||(e[18]=o=>{s.form.billto_type=2,f.getBillJobs()}),class:"border-gray-300 focus:border-sky-300 focus:ring focus:ring-sky-200 focus:ring-opacity-50 rounded-md shadow-sm"},[R,(r(!0),t(c,null,_(u.store.props.customers,o=>(r(),t("option",{key:o.guid,value:o.guid},p(o.name),9,W))),128))],544),[[m,s.form.billto_guid]])]),i("div",null,[n(l,{for:"billto_job",value:"Job"}),d(i("select",{id:"billto_job","onUpdate:modelValue":e[19]||(e[19]=o=>s.form.billto_guid=o),onChange:e[20]||(e[20]=o=>s.form.billto_type=3),class:"border-gray-300 focus:border-sky-300 focus:ring focus:ring-sky-200 focus:ring-opacity-50 rounded-md shadow-sm"},[X,(r(!0),t(c,null,_(u.store.props.billto_jobs,o=>(r(),t("option",{key:o.guid,value:o.guid},p(o.name),9,Y))),128))],544),[[m,s.form.billto_guid]])])])):v("",!0),Z,i("div",$,[i("div",null,[d(i("textarea",{"onUpdate:modelValue":e[21]||(e[21]=o=>s.form.notes=o),class:"mt-1 p-3 w-full border-gray-300 focus:border-sky-300 focus:ring focus:ring-sky-200 focus:ring-opacity-50 rounded-md shadow-sm",id:"notes",name:"notes"},null,512),[[k,s.form.notes]])])])]),i("div",oo,[n(b,{class:V({"opacity-25":s.form.processing||s.form.owner_guid==null}),disabled:s.form.processing||s.form.owner_guid==null,title:"Save"},{default:w(()=>[eo]),_:1},8,["class","disabled"])])],32)}var no=h(C,[["render",so]]);export{no as I};
