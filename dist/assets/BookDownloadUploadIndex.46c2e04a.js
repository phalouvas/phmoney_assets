import{_ as b,r as s,o as p,g as w,a as e,b as a,w as i,n as c,e as y,f as g,d as q,c as v}from"./main.f1eb50b0.js";const x={data(){return{form:{sqlite_file:null},download_url:`/phmoney/teams/${this.store.user.current_team_id}/database/download`}},methods:{async submit(){if(confirm("Are you sure you want to upload this file? All existing data will be deleted.")){let t=new FormData;t.append("sqlite_file",this.form.sqlite_file),await this.store.post(`/phmoney/teams/${this.store.user.current_team_id}/database/upload`,t,{headers:{"Content-Type":"multipart/form-data"}}),this.store.errors===null&&(this.store.errors="File imported succesfully")}}}},k=e("p",null,[g(" Load or save the whole book data as sqlite file. The sqlite file is fully compatible with "),e("a",{href:"https://gnucash.org/",target:"_blank"},"GnuCash")],-1),B=e("p",{class:"text-red-500"}," Warning: This operation will overwite your database and existing data will be forever deleted. ",-1),C={class:"flex items-center justify-end mt-4 gap-2"},D=["href"],$=e("span",{class:"material-icons-outlined"}," download ",-1),A=[$],T=e("span",{class:"material-icons-outlined"},"upload",-1);function U(t,o,u,r,l,d){const f=s("form-label"),_=s("form-input"),m=s("form-secondary-button"),h=s("form-button");return p(),w("form",{onSubmit:o[1]||(o[1]=y((...n)=>d.submit&&d.submit(...n),["prevent"])),class:"p-6"},[k,B,e("div",null,[a(f,{for:"sqlite_file",value:"Select a Sqlite file"}),a(_,{id:"sqlite_file",type:"file",class:"mt-1 block w-full",onInput:o[0]||(o[0]=n=>l.form.sqlite_file=n.target.files[0]),required:"",autofocus:""})]),e("div",C,[a(m,{class:c({"opacity-25":t.store.processing}),disabled:t.store.processing,title:"Download"},{default:i(()=>[e("a",{href:l.download_url},A,8,D)]),_:1},8,["class","disabled"]),a(h,{class:c({"opacity-25":t.store.processing}),disabled:t.store.processing||l.form.sqlite_file===null,title:"Uploads"},{default:i(()=>[T]),_:1},8,["class","disabled"])])],32)}var I=b(x,[["render",U]]);const L={class:"bg-white shadow mt-4 prose max-w-none"},S=q({name:"BookDownloadUploadIndex",setup(t){return(o,u)=>{const r=s("AppLayout");return p(),v(r,{title:"Download/Upload"},{default:i(()=>[e("div",L,[a(I)])]),_:1})}}});export{S as default};
